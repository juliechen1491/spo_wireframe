<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>課程報名表單</title>
    <link rel="stylesheet" href="styles.css">
    <style>
        .required::after {
            content: '*';
            color: #ef4444;
            margin-left: 4px;
        }
        .shadow-primary {
            box-shadow: 0 10px 15px -3px rgba(59, 130, 246, 0.3), 0 4px 6px -2px rgba(59, 130, 246, 0.05);
        }
        
        /* 響應式布局 */
        .form-layout {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .form-column {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }
        
        /* 手機版響應式 */
        @media (max-width: 768px) {
            .form-layout {
                grid-template-columns: 1fr;
                gap: 15px;
            }
            
            .form-column {
                gap: 15px;
            }
        }
    </style>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'primary-blue': '#3b82f6',
                        'secondary-gray': '#6b7280',
                    }
                }
            }
        }

        // 處理表單提交
        function handleFormSubmit(event) {
            event.preventDefault();
            
            // 簡單的表單驗證
            const requiredFields = [
                'student_name', 'student_id', 'student_dob', 
                'student_phone', 'student_height', 'student_address',
                'emergency_contact', 'emergency_phone', 
                'invoice_option', 'bank_code', 'current_ability'
            ];
            
            let hasError = false;
            requiredFields.forEach(fieldName => {
                const field = document.querySelector(`[name="${fieldName}"]`);
                if (field && !field.value.trim()) {
                    field.style.borderColor = '#ef4444';
                    hasError = true;
                } else if (field) {
                    field.style.borderColor = '#d1d5db';
                }
            });
            
            if (hasError) {
                alert('請填寫所有必填欄位（標示 * 的欄位）');
                return;
            }
            
            // 模擬提交延遲
            const submitBtn = event.target.querySelector('button[type="submit"]');
            const originalText = submitBtn.textContent;
            submitBtn.textContent = '提交中...';
            submitBtn.disabled = true;
            
            setTimeout(() => {
                // 跳轉到成功頁面
                window.location.href = 'signup_success.html';
            }, 1500);
        }

        document.addEventListener('DOMContentLoaded', () => {
            // 模擬：判斷是否為兒童課程，並自動帶出監護人資訊
            const isChildCourse = true; // 假設這門課是給兒童上的
            const loggedInAsAdult = true; // 假設王大人已登入
            
            const guardianSection = document.getElementById('guardian-info-section');
            const studentSectionTitle = document.getElementById('student-section-title');
            
            if (isChildCourse && loggedInAsAdult) {
                // 如果是兒童課程且是成人報名，顯示監護人區塊
                guardianSection.style.display = 'block';
                // 模擬系統帶入王大人的資料
                document.getElementById('guardian-name').value = '王大人 (系統帶入)';
                document.getElementById('guardian-phone').value = '0912-345678 (系統帶入)';
                document.getElementById('guardian-email').value = 'wang.daren@example.com (系統帶入)';
                document.getElementById('guardian-address').value = '台北市某路某號 (系統帶入)';
                
                studentSectionTitle.textContent = '學員資料 (王小明)';
            } else {
                // 否則隱藏監護人區塊 (例如成人為自己報名)
                guardianSection.style.display = 'none';
                studentSectionTitle.textContent = '學員資料';
            }
        });
    </script>
</head>
<body>
    <div class="container">
        <header class="header-title">
            <h1>課程報名表單</h1>
            <p>課程名稱：游泳特訓班 - 基礎組 (2025/11)</p>
        </header>

        <form id="registration-form" onsubmit="handleFormSubmit(event)">
            <!-- 左右排版容器 -->
            <div class="form-layout">
                
                <!-- 左欄 -->
                <div class="form-column">
                    <!-- 區塊 A: 報名對象 (學員) 必填資訊 -->
                    <div class="form-card">
                        <h2 class="form-title">1. 學員資料</h2>
                <div class="form-row">
                    <div class="form-group">
                        <label for="student-name" class="form-label required">學員姓名</label>
                        <input type="text" id="student-name" name="student_name" placeholder="請填寫學員姓名" class="form-control">
                    </div>
                    <div class="form-group">
                        <label for="student-id" class="form-label required">學員身分證字號/護照號碼</label>
                        <input type="text" id="student-id" name="student_id" placeholder="用於保險與身份核對" class="form-control">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="student-dob" class="form-label required">學員生日</label>
                        <input type="date" id="student-dob" name="student_dob" class="form-control">
                    </div>
                    <div class="form-group">
                        <label for="student-phone" class="form-label required">學員手機</label>
                        <input type="tel" id="student-phone" name="student_phone" placeholder="若無，可填監護人電話" class="form-control">
                    </div>
                    <div class="form-group">
                        <label for="student-height" class="form-label required">學員身高 (cm)</label>
                        <input type="text" id="student-height" name="student_height" placeholder="例如：125cm" class="form-control">
                    </div>
                </div>
                <div class="form-group">
                    <label for="student-address" class="form-label required">聯絡地址</label>
                    <input type="text" id="student-address" name="student_address" placeholder="請填寫完整的聯絡地址" class="form-control">
                </div>
                    </div>
                </div>
                
                <!-- 右欄 -->
                <div class="form-column">
                    <!-- 區塊 B: 監護人資訊 (成人為兒童報名時顯示) -->
                    <div id="guardian-info-section" class="form-card">
                        <h2 class="form-title">2. 監護人資料 (系統自動帶入)</h2>
                <div style="background-color: #eff6ff; padding: 15px; border-radius: 8px; border: 1px solid #bfdbfe; margin-bottom: 20px;">
                    <p style="color: #1d4ed8; font-size: 14px; font-weight: 600;">系統已根據您的登入帳號自動帶入，若需修改請至會員專區。</p>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="guardian-name" class="form-label">監護人姓名</label>
                        <input type="text" id="guardian-name" name="guardian_name" disabled class="form-control" style="background-color: #f3f4f6; cursor: not-allowed;">
                    </div>
                    <div class="form-group">
                        <label for="guardian-email" class="form-label">監護人 Email</label>
                        <input type="email" id="guardian-email" name="guardian_email" disabled class="form-control" style="background-color: #f3f4f6; cursor: not-allowed;">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="guardian-phone" class="form-label">監護人手機</label>
                        <input type="tel" id="guardian-phone" name="guardian_phone" disabled class="form-control" style="background-color: #f3f4f6; cursor: not-allowed;">
                    </div>
                    <div class="form-group">
                        <label for="guardian-address" class="form-label">監護人地址</label>
                        <input type="text" id="guardian-address" name="guardian_address" disabled class="form-control" style="background-color: #f3f4f6; cursor: not-allowed;">
                    </div>
                </div>
                    </div>
            
                    <!-- 區塊 C: 交易與緊急聯絡人 (必填) -->
                    <div class="form-card">
                        <h2 class="form-title">3. 交易與緊急聯絡人資訊</h2>
                <div class="form-row">
                    <div class="form-group">
                        <label for="emergency-contact" class="form-label required">緊急聯絡人姓名</label>
                        <input type="text" id="emergency-contact" name="emergency_contact" placeholder="姓名" class="form-control">
                    </div>
                    <div class="form-group">
                        <label for="emergency-phone" class="form-label required">緊急聯絡人電話</label>
                        <input type="tel" id="emergency-phone" name="emergency_phone" placeholder="手機或市話" class="form-control">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="invoice-option" class="form-label required">發票選項</label>
                        <select id="invoice-option" name="invoice_option" required class="form-control">
                            <option value="">請選擇</option>
                            <option value="paper">紙本發票</option>
                            <option value="e_carrier">電子發票 (手機條碼)</option>
                            <option value="e_org">電子發票 (公司統編)</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="bank-code" class="form-label required">匯款帳號後五碼</label>
                        <input type="text" id="bank-code" name="bank_code" maxlength="5" pattern="\d{5}" placeholder="用於確認您的繳費，僅限數字" class="form-control">
                        <p style="font-size: 12px; color: #666; margin-top: 4px;">請在繳費完成後填寫此欄位，確保報名成功。</p>
                    </div>
                </div>
                    </div>
                </div>
            </div>

            <!-- 區塊 D: 運動與健康附加資訊 (全寬度) -->
            <div class="form-card">
                <h2 class="form-title">4. 運動與健康附加資訊</h2>
                
                <!-- 參賽經驗與最佳成績 -->
                <div class="form-group">
                    <label class="form-label">參賽經驗 (例如：是否參加過鐵人賽)</label>
                    <div style="display: flex; gap: 20px; margin-bottom: 12px;">
                        <label style="display: flex; align-items: center; cursor: pointer;">
                            <input type="radio" name="competition_exp" value="yes" style="margin-right: 8px;">
                            <span>有</span>
                        </label>
                        <label style="display: flex; align-items: center; cursor: pointer;">
                            <input type="radio" name="competition_exp" value="no" checked style="margin-right: 8px;">
                            <span>無</span>
                        </label>
                    </div>
                    <textarea id="best-record" name="best_record" rows="3" placeholder="若有，請填寫您的最佳成績或參賽經驗描述..." class="form-control" style="width: 100%; resize: vertical;"></textarea>
                </div>

                <!-- 能力現況 -->
                <div class="form-group">
                    <label for="current-ability" class="form-label required">能力現況 (兒童/成人學員必填)</label>
                    <select id="current-ability" name="current_ability" required class="form-control">
                        <option value="">請選擇 - (此選項將由後台設定模板)</option>
                        <option value="begginer">初學：無經驗，需從基礎開始</option>
                        <option value="intermediate">中階：已掌握基礎動作</option>
                        <option value="advanced">高階：可獨立完成訓練</option>
                    </select>
                </div>

                <!-- 運動習慣與個人資訊 -->
                <div class="form-row">
                    <div class="form-group">
                        <label for="exercise-habit" class="form-label">運動習慣/時間</label>
                        <input type="text" id="exercise-habit" name="exercise_habit" placeholder="例如：每週跑步2次，每次1小時" class="form-control">
                    </div>
                    <div class="form-group">
                        <label for="occupation" class="form-label">職業 (僅限成人學員填寫)</label>
                        <input type="text" id="occupation" name="occupation" placeholder="例如：工程師/學生" class="form-control">
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="weekly-hours" class="form-label">每週可訓練時數 (小時)</label>
                    <input type="text" id="weekly-hours" name="weekly_hours" placeholder="例如：10小時" class="form-control" style="max-width: 300px;">
                </div>

                <!-- 健康狀況 -->
                <div class="form-group">
                    <label for="health-status" class="form-label">健康狀況 (運動受傷/手術/慢性疾病)</label>
                    <textarea id="health-status" name="health_status" rows="4" placeholder="請詳細說明任何運動受傷、手術經歷或慢性疾病，以利教練評估風險並提供適當的訓練建議..." class="form-control" style="width: 100%; resize: vertical;"></textarea>
                </div>

                <!-- 已報名賽事 -->
                <div class="form-group">
                    <label for="registered-event" class="form-label">是否已有報名賽事 (賽事名稱及場次)</label>
                    <input type="text" id="registered-event" name="registered_event" placeholder="例如：台北馬拉松 2025/12/15" class="form-control">
                </div>
                
                <!-- 訓練期望 -->
                <div class="form-group">
                    <label for="training-expectation" class="form-label">訓練期望</label>
                    <textarea id="training-expectation" name="training_expectation" rows="4" placeholder="您希望透過本次課程達成什麼目標？請詳細說明您的期望和需求..." class="form-control" style="width: 100%; resize: vertical;"></textarea>
                </div>
                
            </div>

            <!-- 提交按鈕 -->
            <div style="text-align: center; padding: 30px 20px;">
                <button type="submit" class="btn-primary" style="padding: 15px 40px; font-size: 16px; font-weight: bold; border-radius: 25px; box-shadow: 0 4px 15px rgba(59, 130, 246, 0.3);">
                    確認報名並送出表單
                </button>
            </div>
            
        </form>
    </div>
</body>
</html>
